"use strict";(self.webpackChunkmediumclone_angular=self.webpackChunkmediumclone_angular||[]).push([[867],{4208:(U,C,s)=>{s.d(C,{H:()=>r});var o=s(5879);let r=(()=>{class u{constructor(){this.message="Something went wrong"}static#t=this.\u0275fac=function(g){return new(g||u)};static#e=this.\u0275cmp=o.Xpm({type:u,selectors:[["mc-error-message"]],inputs:{message:["errorMessage","message"]},standalone:!0,features:[o.jDz],decls:2,vars:1,template:function(g,h){1&g&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&g&&(o.xp6(1),o.Oqu(h.message))},encapsulation:2})}return u})()},3270:(U,C,s)=>{s.d(C,{g:()=>L});var o=s(5879),r=s(4221),u=s(2056),x=s(5619),p=s(7398),g=s(1582),h=s(6814),m=s(8091);const _=function(F,A){return{btn:!0,"btn-sm":!0,"btn-primary":F,"btn-outline-primary":A}};function P(F,A){if(1&F){const y=o.EpF();o.ynx(0),o.TgZ(1,"button",1),o.NdJ("click",function(){o.CHM(y);const O=o.oxw();return o.KtG(O.onFavorite())}),o._UZ(2,"i",2),o.TgZ(3,"span"),o._uU(4),o.qZA()(),o.BQk()}if(2&F){const y=A.ngrxLet;o.xp6(1),o.Q6J("disabled",!y.isAuth)("ngClass",o.WLB(3,_,y.isFavorited,!y.isFavorited)),o.xp6(3),o.hij("\xa0",y.count,"")}}const T=function(F,A,y){return{count:F,isFavorited:A,isAuth:y}};let L=(()=>{class F{constructor(){this._favCountEmitter$=new x.X(0),this._isFavoritedEmitter$=new x.X(!1),this._store=(0,o.f3M)(r.yh),this.isAuth$=this._store.select(g.HF).pipe((0,p.U)(y=>!!y)),this.isFavorited=!1,this.favCount=0,this.slug="",this.favCount$=this._favCountEmitter$.asObservable(),this.isFavorited$=this._isFavoritedEmitter$.asObservable()}ngOnInit(){if(!this.slug)throw new Error("Must provide slug");this._favCountEmitter$.next(this.favCount),this._isFavoritedEmitter$.next(this.isFavorited)}ngOnDestroy(){this._favCountEmitter$.complete(),this._isFavoritedEmitter$.complete()}onFavorite(){this.isFavorited?(this._favCountEmitter$.next(this.favCount-1),this.favCount-=1):(this._favCountEmitter$.next(this.favCount+1),this.favCount+=1),this._isFavoritedEmitter$.next(!this.isFavorited),this.isFavorited=!this.isFavorited,this._store.dispatch(u.C.favoriteArticle({slug:this.slug,isFavorited:this.isFavorited}))}static#t=this.\u0275fac=function(v){return new(v||F)};static#e=this.\u0275cmp=o.Xpm({type:F,selectors:[["app-fav-article"]],inputs:{isFavorited:"isFavorited",favCount:"favCount",slug:["articleSlug","slug"]},decls:1,vars:5,consts:[[4,"ngrxLet"],["type","button",3,"disabled","ngClass","click"],[1,"ion-heart"]],template:function(v,O){1&v&&o.YNc(0,P,5,6,"ng-container",0),2&v&&o.Q6J("ngrxLet",o.kEZ(1,T,O.favCount$,O.isFavorited$,O.isAuth$))},dependencies:[h.mk,m.eJ],encapsulation:2,changeDetection:0})}return F})()},8994:(U,C,s)=>{s.d(C,{o:()=>u});var o=s(6814),r=s(5879);let u=(()=>{class x{static#t=this.\u0275fac=function(h){return new(h||x)};static#e=this.\u0275mod=r.oAB({type:x});static#r=this.\u0275inj=r.cJS({imports:[o.ez]})}return x})()},4867:(U,C,s)=>{s.d(C,{e:()=>ht});var o={};s.r(o),s.d(o,{exclude:()=>at,extract:()=>I,parse:()=>$,parseUrl:()=>w,pick:()=>z,stringify:()=>Q,stringifyUrl:()=>W});var r=s(5879),u=s(4221),x=s(2594),p=s(2572),g=s(5709),h=s(7011),m=s(6814),_=s(2394),P=s(4208),T=s(6992);let L=(()=>{class t{range(e,i){return[...Array(i-e).keys()].map(a=>a+e)}static#t=this.\u0275fac=function(i){return new(i||t)};static#e=this.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var F=s(8091),A=s(9515);function y(t,n){if(1&t&&(r.TgZ(0,"div",6),r._uU(1),r.qZA()),2&t){const e=n.ngrxLet,i=r.oxw();r.xp6(1),r.hij(" ",i.currentPage+" "+e.ofText+" "+(i.pages.length||1)+" "+e.pagesText," ")}}const v=function(t){return{page:t}},O=function(t){return{backgroundColor:t}};let Y=(()=>{class t{constructor(){this.totalAmount=0,this.limit=20,this.currentPage=1,this.url="",this._pagesCount=1,this._utilsService=(0,r.f3M)(L),this.pages=[]}ngOnInit(){this._pagesCount=Math.ceil(this.totalAmount/this.limit),this.pages=this._pagesCount>0?this._utilsService.range(1,this._pagesCount):[]}static#t=this.\u0275fac=function(i){return new(i||t)};static#e=this.\u0275cmp=r.Xpm({type:t,selectors:[["mc-pagination"]],inputs:{totalAmount:["total","totalAmount"],limit:"limit",currentPage:"currentPage",url:"url"},standalone:!0,features:[r.jDz],decls:8,vars:19,consts:[[1,"pagination",2,"display","flex","flex-direction","column","justify-content","center"],[1,"page-item",2,"display","flex","justify-content","center","gap","1rem"],["type","button",1,"page-link",3,"routerLink","queryParams","disabled","ngStyle"],[1,"ion-chevron-left"],[1,"ion-chevron-right"],["style","text-align: center;",4,"ngrxLet"],[2,"text-align","center"]],template:function(i,a){1&i&&(r.TgZ(0,"ul",0)(1,"li",1)(2,"button",2),r._UZ(3,"i",3),r.qZA(),r.TgZ(4,"button",2),r._UZ(5,"i",4),r.qZA()(),r.YNc(6,y,2,1,"div",5),r.ALo(7,"translate"),r.qZA()),2&i&&(r.xp6(2),r.Q6J("routerLink",a.url)("queryParams",r.VKq(11,v,a.currentPage-1))("disabled",1===a.currentPage)("ngStyle",r.VKq(13,O,1===a.currentPage?"lightgrey":void 0)),r.xp6(2),r.Q6J("routerLink",a.url)("queryParams",r.VKq(15,v,a.currentPage+1))("disabled",a.currentPage>=a.pages.length)("ngStyle",r.VKq(17,O,a.currentPage>=a.pages.length?"lightgrey":void 0)),r.xp6(2),r.Q6J("ngrxLet",r.lcZ(7,9,"paginator")))},dependencies:[m.ez,m.PC,_.Bz,_.rH,F.eJ,A.aw,A.X$],encapsulation:2})}return t})();var H=s(553);const S="%[a-f0-9]{2}",j=new RegExp("("+S+")|([^%]+?)","gi"),N=new RegExp("("+S+")+","gi");function M(t,n){try{return[decodeURIComponent(t.join(""))]}catch{}if(1===t.length)return t;const e=t.slice(0,n=n||1),i=t.slice(n);return Array.prototype.concat.call([],M(e),M(i))}function q(t){try{return decodeURIComponent(t)}catch{let n=t.match(j)||[];for(let e=1;e<n.length;e++)n=(t=M(n,e).join("")).match(j)||[];return t}}function b(t,n){if("string"!=typeof t||"string"!=typeof n)throw new TypeError("Expected the arguments to be of type `string`");if(""===t||""===n)return[];const e=t.indexOf(n);return-1===e?[]:[t.slice(0,e),t.slice(e+n.length)]}function Z(t,n){const e={};if(Array.isArray(n))for(const i of n){const a=Object.getOwnPropertyDescriptor(t,i);a?.enumerable&&Object.defineProperty(e,i,a)}else for(const i of Reflect.ownKeys(t)){const a=Object.getOwnPropertyDescriptor(t,i);a.enumerable&&n(i,t[i],t)&&Object.defineProperty(e,i,a)}return e}const tt=t=>null==t,et=t=>encodeURIComponent(t).replace(/[!'()*]/g,n=>`%${n.charCodeAt(0).toString(16).toUpperCase()}`),D=Symbol("encodeFragmentIdentifier");function J(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function d(t,n){return n.encode?n.strict?et(t):encodeURIComponent(t):t}function E(t,n){return n.decode?function k(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return decodeURIComponent(t)}catch{return function G(t){const n={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"};let e=N.exec(t);for(;e;){try{n[e[0]]=decodeURIComponent(e[0])}catch{const a=q(e[0]);a!==e[0]&&(n[e[0]]=a)}e=N.exec(t)}n["%C2"]="\ufffd";const i=Object.keys(n);for(const a of i)t=t.replace(new RegExp(a,"g"),n[a]);return t}(t)}}(t):t}function K(t){return Array.isArray(t)?t.sort():"object"==typeof t?K(Object.keys(t)).sort((n,e)=>Number(n)-Number(e)).map(n=>t[n]):t}function R(t){const n=t.indexOf("#");return-1!==n&&(t=t.slice(0,n)),t}function B(t,n){return n.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):n.parseBooleans&&null!==t&&("true"===t.toLowerCase()||"false"===t.toLowerCase())&&(t="true"===t.toLowerCase()),t}function I(t){const n=(t=R(t)).indexOf("?");return-1===n?"":t.slice(n+1)}function $(t,n){J((n={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...n}).arrayFormatSeparator);const e=function nt(t){let n;switch(t.arrayFormat){case"index":return(e,i,a)=>{n=/\[(\d*)]$/.exec(e),e=e.replace(/\[\d*]$/,""),n?(void 0===a[e]&&(a[e]={}),a[e][n[1]]=i):a[e]=i};case"bracket":return(e,i,a)=>{n=/(\[])$/.exec(e),a[e=e.replace(/\[]$/,"")]=n?void 0!==a[e]?[...a[e],i]:[i]:i};case"colon-list-separator":return(e,i,a)=>{n=/(:list)$/.exec(e),a[e=e.replace(/:list$/,"")]=n?void 0!==a[e]?[...a[e],i]:[i]:i};case"comma":case"separator":return(e,i,a)=>{const l="string"==typeof i&&i.includes(t.arrayFormatSeparator),c="string"==typeof i&&!l&&E(i,t).includes(t.arrayFormatSeparator);i=c?E(i,t):i;const f=l||c?i.split(t.arrayFormatSeparator).map(_t=>E(_t,t)):null===i?i:E(i,t);a[e]=f};case"bracket-separator":return(e,i,a)=>{const l=/(\[])$/.test(e);if(e=e.replace(/\[]$/,""),!l)return void(a[e]=i&&E(i,t));const c=null===i?[]:i.split(t.arrayFormatSeparator).map(f=>E(f,t));a[e]=void 0!==a[e]?[...a[e],...c]:c};default:return(e,i,a)=>{a[e]=void 0!==a[e]?[...[a[e]].flat(),i]:i}}}(n),i=Object.create(null);if("string"!=typeof t||!(t=t.trim().replace(/^[?#&]/,"")))return i;for(const a of t.split("&")){if(""===a)continue;const l=n.decode?a.replace(/\+/g," "):a;let[c,f]=b(l,"=");void 0===c&&(c=l),f=void 0===f?null:["comma","separator","bracket-separator"].includes(n.arrayFormat)?f:E(f,n),e(E(c,n),f,i)}for(const[a,l]of Object.entries(i))if("object"==typeof l&&null!==l)for(const[c,f]of Object.entries(l))l[c]=B(f,n);else i[a]=B(l,n);return!1===n.sort?i:(!0===n.sort?Object.keys(i).sort():Object.keys(i).sort(n.sort)).reduce((a,l)=>{const c=i[l];return a[l]=c&&"object"==typeof c&&!Array.isArray(c)?K(c):c,a},Object.create(null))}function Q(t,n){if(!t)return"";J((n={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...n}).arrayFormatSeparator);const e=c=>n.skipNull&&tt(t[c])||n.skipEmptyString&&""===t[c],i=function rt(t){switch(t.arrayFormat){case"index":return n=>(e,i)=>{const a=e.length;return void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?e:null===i?[...e,[d(n,t),"[",a,"]"].join("")]:[...e,[d(n,t),"[",d(a,t),"]=",d(i,t)].join("")]};case"bracket":return n=>(e,i)=>void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?e:null===i?[...e,[d(n,t),"[]"].join("")]:[...e,[d(n,t),"[]=",d(i,t)].join("")];case"colon-list-separator":return n=>(e,i)=>void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?e:null===i?[...e,[d(n,t),":list="].join("")]:[...e,[d(n,t),":list=",d(i,t)].join("")];case"comma":case"separator":case"bracket-separator":{const n="bracket-separator"===t.arrayFormat?"[]=":"=";return e=>(i,a)=>void 0===a||t.skipNull&&null===a||t.skipEmptyString&&""===a?i:(a=null===a?"":a,0===i.length?[[d(e,t),n,d(a,t)].join("")]:[[i,d(a,t)].join(t.arrayFormatSeparator)])}default:return n=>(e,i)=>void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?e:null===i?[...e,d(n,t)]:[...e,[d(n,t),"=",d(i,t)].join("")]}}(n),a={};for(const[c,f]of Object.entries(t))e(c)||(a[c]=f);const l=Object.keys(a);return!1!==n.sort&&l.sort(n.sort),l.map(c=>{const f=t[c];return void 0===f?"":null===f?d(c,n):Array.isArray(f)?0===f.length&&"bracket-separator"===n.arrayFormat?d(c,n)+"[]":f.reduce(i(c),[]).join("&"):d(c,n)+"="+d(f,n)}).filter(c=>c.length>0).join("&")}function w(t,n){n={decode:!0,...n};let[e,i]=b(t,"#");return void 0===e&&(e=t),{url:e?.split("?")?.[0]??"",query:$(I(t),n),...n&&n.parseFragmentIdentifier&&i?{fragmentIdentifier:E(i,n)}:{}}}function W(t,n){n={encode:!0,strict:!0,[D]:!0,...n};const e=R(t.url).split("?")[0]||"";let l=Q({...$(I(t.url),{sort:!1}),...t.query},n);l&&(l=`?${l}`);let c=function it(t){let n="";const e=t.indexOf("#");return-1!==e&&(n=t.slice(e)),n}(t.url);if(t.fragmentIdentifier){const f=new URL(e);f.hash=t.fragmentIdentifier,c=n[D]?f.hash:`#${t.fragmentIdentifier}`}return`${e}${l}${c}`}function z(t,n,e){e={parseFragmentIdentifier:!0,[D]:!1,...e};const{url:i,query:a,fragmentIdentifier:l}=w(t,e);return W({url:i,query:Z(a,n),fragmentIdentifier:l},e)}function at(t,n,e){return z(t,Array.isArray(n)?a=>!n.includes(a):(a,l)=>!n(a,l),e)}const V=o;var st=s(7232),ot=s(8994),ct=s(3270);function lt(t,n){1&t&&r._UZ(0,"mc-loading")}function ut(t,n){if(1&t&&r._UZ(0,"mc-error-message",2),2&t){const e=r.oxw().ngIf;r.Q6J("errorMessage",e.error)}}function ft(t,n){if(1&t&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&t){const e=n.ngIf;r.xp6(1),r.hij(" ",e.readMore," ")}}const X=function(t){return["/profiles",t]},dt=function(t){return["/articles",t]};function gt(t,n){if(1&t&&(r.TgZ(0,"div",5)(1,"div",6)(2,"a",7),r._UZ(3,"img",8),r.qZA(),r.TgZ(4,"div",9)(5,"a",7),r._uU(6),r.qZA(),r.TgZ(7,"span",10),r._uU(8),r.ALo(9,"date"),r.qZA()(),r.TgZ(10,"div",11),r._UZ(11,"app-fav-article",12),r.qZA()(),r.TgZ(12,"a",13)(13,"h1"),r._uU(14),r.qZA(),r.TgZ(15,"p"),r._uU(16),r.qZA(),r.YNc(17,ft,2,1,"span",0),r.ALo(18,"ngrxPush"),r.ALo(19,"translate"),r._UZ(20,"mc-tag-list",14),r.qZA()()),2&t){const e=n.$implicit;r.xp6(2),r.Q6J("routerLink",r.VKq(20,X,e.author.username)),r.xp6(1),r.Q6J("src",e.author.image,r.LSH),r.xp6(2),r.Q6J("routerLink",r.VKq(22,X,e.author.username)),r.xp6(1),r.hij(" ",e.author.username," "),r.xp6(2),r.Oqu(r.xi3(9,13,e.createdAt,"yyyy, MMM dd hh:mm a")),r.xp6(3),r.Q6J("articleSlug",e.slug)("isFavorited",e.favorited)("favCount",e.favoritesCount),r.xp6(1),r.Q6J("routerLink",r.VKq(24,dt,e.slug)),r.xp6(2),r.Oqu(e.title),r.xp6(2),r.Oqu(e.description),r.xp6(1),r.Q6J("ngIf",r.lcZ(18,16,r.lcZ(19,18,"feed"))),r.xp6(3),r.Q6J("tags",e.tagList)}}function mt(t,n){if(1&t&&(r.TgZ(0,"div"),r.YNc(1,gt,21,26,"div",3),r._UZ(2,"mc-pagination",4),r.qZA()),2&t){const e=r.oxw().ngIf,i=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.feed.articles),r.xp6(1),r.Q6J("total",e.feed.articlesCount)("limit",i.limit)("url",i.baseUrl)("currentPage",i.currentPage)}}function pt(t,n){if(1&t&&(r.ynx(0),r.YNc(1,lt,1,0,"mc-loading",0),r.YNc(2,ut,1,1,"mc-error-message",1),r.YNc(3,mt,3,5,"div",0),r.BQk()),2&t){const e=n.ngIf;r.xp6(1),r.Q6J("ngIf",e.isLoading),r.xp6(1),r.Q6J("ngIf",e.error),r.xp6(1),r.Q6J("ngIf",e.feed)}}let ht=(()=>{class t{constructor(){this.apiUrl="",this._store=(0,r.f3M)(u.yh),this._router=(0,r.f3M)(_.F0),this._route=(0,r.f3M)(_.gz),this.data$=null,this.limit=H.N.limit,this.baseUrl=this._router.url.split("?")[0],this.currentPage=0}ngOnInit(){this.data$=(0,p.a)({isLoading:this._store.select(h.xU),error:this._store.select(h.zh),feed:this._store.select(h.up)}),this._route.queryParams.pipe((0,g.g)(200)).subscribe(e=>{this.currentPage=Number(e.page||"1"),this._dispatchAction()})}ngOnChanges(e){!e.apiUrl.firstChange&&e.apiUrl.currentValue!==e.apiUrl.previousValue&&this._dispatchAction()}_dispatchAction(){const e=this.currentPage*this.limit-this.limit,i=V.parseUrl(this.apiUrl),a=V.stringify({limit:this.limit,offset:e,...i.query});this._store.dispatch(x.I.getFeed({url:`${i.url}?${a}`}))}static#t=this.\u0275fac=function(i){return new(i||t)};static#e=this.\u0275cmp=r.Xpm({type:t,selectors:[["mc-feed"]],inputs:{apiUrl:"apiUrl"},standalone:!0,features:[r.TTD,r.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[3,"errorMessage",4,"ngIf"],[3,"errorMessage"],["class","article-preview",4,"ngFor","ngForOf"],[3,"total","limit","url","currentPage"],[1,"article-preview"],[1,"article-meta"],[3,"routerLink"],["alt","pic",3,"src"],[1,"info"],[1,"date"],[1,"pull-xs-right"],[3,"articleSlug","isFavorited","favCount"],[1,"preview-link",3,"routerLink"],[3,"tags"]],template:function(i,a){1&i&&(r.YNc(0,pt,4,3,"ng-container",0),r.ALo(1,"ngrxPush")),2&i&&r.Q6J("ngIf",r.lcZ(1,1,a.data$))},dependencies:[m.ez,m.sg,m.O5,m.uU,_.Bz,_.rH,P.H,T.N,Y,st.J,ot.o,ct.g,F.fM,A.aw,A.X$],encapsulation:2,changeDetection:0})}return t})()},6992:(U,C,s)=>{s.d(C,{N:()=>p});var o=s(8091),r=s(9515),u=s(5879);function x(g,h){if(1&g&&(u.TgZ(0,"div",1)(1,"strong"),u._uU(2),u.qZA(),u._UZ(3,"div",2),u.qZA()),2&g){const m=h.ngrxLet;u.xp6(2),u.Oqu(m.loadingText)}}let p=(()=>{class g{static#t=this.\u0275fac=function(_){return new(_||g)};static#e=this.\u0275cmp=u.Xpm({type:g,selectors:[["mc-loading"]],standalone:!0,features:[u.jDz],decls:2,vars:3,consts:[["class","d-flex align-items-center",4,"ngrxLet"],[1,"d-flex","align-items-center"],["role","status","aria-hidden","true",1,"spinner-border","ms-auto"]],template:function(_,P){1&_&&(u.YNc(0,x,4,1,"div",0),u.ALo(1,"translate")),2&_&&u.Q6J("ngrxLet",u.lcZ(1,1,"app"))},dependencies:[o.eJ,r.aw,r.X$],encapsulation:2,changeDetection:0})}return g})()},7232:(U,C,s)=>{s.d(C,{J:()=>x});var o=s(6814),r=s(5879);function u(p,g){if(1&p&&(r.TgZ(0,"li",2),r._uU(1),r.qZA()),2&p){const h=g.$implicit;r.xp6(1),r.hij(" ",h," ")}}let x=(()=>{class p{constructor(){this.tags=[]}static#t=this.\u0275fac=function(m){return new(m||p)};static#e=this.\u0275cmp=r.Xpm({type:p,selectors:[["mc-tag-list"]],inputs:{tags:"tags"},standalone:!0,features:[r.jDz],decls:2,vars:1,consts:[[1,"tag-list"],["class","tag-default tag-pill tag-outline",4,"ngFor","ngForOf"],[1,"tag-default","tag-pill","tag-outline"]],template:function(m,_){1&m&&(r.TgZ(0,"ul",0),r.YNc(1,u,2,1,"li",1),r.qZA()),2&m&&(r.xp6(1),r.Q6J("ngForOf",_.tags))},dependencies:[o.ez,o.sg],encapsulation:2})}return p})()}}]);