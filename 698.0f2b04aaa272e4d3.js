"use strict";(self.webpackChunkmediumclone_angular=self.webpackChunkmediumclone_angular||[]).push([[698],{9972:(F,L,o)=>{o.r(L),o.d(L,{ArticleDetailModule:()=>$t});var r=o(6814),m=o(2394),t=o(5879),v=o(4221),A=o(7398),C=o(6306),T=o(2096),h=o(2181),a=o(9397),$=o(4664),U=o(7081),b=o(2572),f=o(8180),p=o(4440),_=o(7808),y=o(1582),E=o(8904),u=o(7232),J=o(5619),D=o(8091),O=o(9515);function P(n,c){1&n&&t.GkF(0)}function Q(n,c){if(1&n&&(t.ynx(0),t.YNc(1,P,1,0,"ng-container",17),t.BQk()),2&n){t.oxw(2);const e=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function I(n,c){1&n&&t.GkF(0)}const N=function(n,c,e,i,s){return{username:n,isFavorited:c,favCount:e,slug:i,isFollowing:s}},V=function(n){return{$implicit:n}};function B(n,c){if(1&n&&(t.ynx(0),t.YNc(1,I,1,0,"ng-container",18),t.BQk()),2&n){const e=t.oxw(2),i=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(8,V,t.qbA(2,N,e.article.author.username,e.article.favorited,e.article.favoritesCount,e.article.slug,e.article.author.following)))}}const S=function(n){return["/profiles",n]};function K(n,c){if(1&n&&(t.ynx(0),t.TgZ(1,"div",4)(2,"div",5)(3,"div",6)(4,"h1"),t._uU(5),t.qZA(),t.TgZ(6,"div",7)(7,"a",8),t._UZ(8,"img",9),t.qZA(),t.TgZ(9,"div",10)(10,"a",8),t._uU(11),t.qZA(),t.TgZ(12,"span",11),t._uU(13),t.ALo(14,"date"),t.qZA()(),t.YNc(15,Q,2,1,"ng-container",12),t.YNc(16,B,2,10,"ng-container",12),t.qZA()()(),t.TgZ(17,"div",13)(18,"div",14)(19,"div",15)(20,"div")(21,"p"),t._uU(22),t.qZA()(),t._UZ(23,"mc-tag-list",16),t.qZA()()()(),t.BQk()),2&n){const e=t.oxw();t.xp6(5),t.Oqu(e.article.title),t.xp6(2),t.Q6J("routerLink",t.VKq(13,S,e.article.author.username)),t.xp6(1),t.Q6J("src",e.article.author.image,t.LSH),t.xp6(2),t.Q6J("routerLink",t.VKq(15,S,e.article.author.username)),t.xp6(1),t.hij(" ",e.article.author.username," "),t.xp6(2),t.Oqu(t.xi3(14,10,e.article.createdAt,"dd MMM yyyy, hh:mm a")),t.xp6(2),t.Q6J("ngIf",e.article.author.username===(null==e.user?null:e.user.username)),t.xp6(1),t.Q6J("ngIf",!e.user||e.article.author.username!==e.user.username),t.xp6(6),t.Oqu(e.article.body),t.xp6(1),t.Q6J("tags",e.article.tagList)}}function l(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",22)(1,"button",23),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.handleConfirmDeletion(!0))}),t._uU(2),t.qZA(),t.TgZ(3,"button",24),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.handleConfirmDeletion(!1))}),t._uU(4),t.qZA()()}if(2&n){const e=c.ngIf,i=t.oxw().ngrxLet;t.xp6(1),t.Q6J("disabled",e.isLoading),t.xp6(1),t.hij(" ",i.buttons.yes," "),t.xp6(2),t.hij(" ",i.buttons.no," ")}}function x(n,c){if(1&n&&(t.TgZ(0,"div",20)(1,"span")(2,"h1"),t._uU(3),t.qZA()(),t.TgZ(4,"span"),t.YNc(5,l,5,3,"div",21),t.ALo(6,"ngrxPush"),t.qZA()()),2&n){const e=c.ngrxLet,i=t.oxw(2);t.xp6(3),t.Oqu(e.confirmationText),t.xp6(2),t.Q6J("ngIf",t.lcZ(6,2,i.inputValues$))}}function d(n,c){1&n&&(t.YNc(0,x,7,4,"div",19),t.ALo(1,"ngrxPush"),t.ALo(2,"translate")),2&n&&t.Q6J("ngrxLet",t.lcZ(1,1,t.lcZ(2,3,"article")))}function g(n,c){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",26),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.editArticleEmitter$.emit())}),t._UZ(2,"i",27),t._uU(3),t.qZA(),t._uU(4," \xa0 "),t.TgZ(5,"button",28),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.handleShowConfirmation())}),t._UZ(6,"i",29),t._uU(7),t.qZA(),t.BQk()}if(2&n){const e=c.ngrxLet,i=t.oxw(2);t.xp6(1),t.Q6J("disabled",i.isLoading),t.xp6(2),t.hij(" \xa0 ",e.buttons.edit," "),t.xp6(2),t.Q6J("disabled",i.isLoading),t.xp6(2),t.hij(" \xa0 ",e.buttons.delete," ")}}function Z(n,c){1&n&&(t.YNc(0,g,8,4,"ng-container",25),t.ALo(1,"ngrxPush"),t.ALo(2,"translate")),2&n&&t.Q6J("ngrxLet",t.lcZ(1,1,t.lcZ(2,3,"article")))}function X(n,c){1&n&&(t.Hsn(0),t._uU(1," \xa0 "),t.Hsn(2,1))}const H=[[["","followProfile",""]],[["","favArticle",""]]],R=["[followProfile]","[favArticle]"];let j=(()=>{class n{constructor(){this.article=null,this.user=null,this.isLoading=!1,this.editArticleEmitter$=new t.vpe,this.deleteArticleEmitter$=new t.vpe,this._showConfirmationEmitter$=new J.X(!1),this._inputValuesEmitter$=new J.X(null),this.showConfirmation$=this._showConfirmationEmitter$.asObservable(),this.inputValues$=this._inputValuesEmitter$.asObservable()}ngOnInit(){this._inputValuesEmitter$.next({article:this.article,isLoading:this.isLoading,user:this.user})}ngOnChanges(e){e.isLoading&&this._inputValuesEmitter$.pipe((0,f.q)(1),(0,h.h)(i=>!!i)).subscribe(i=>this._inputValuesEmitter$.next({...i,isLoading:e.isLoading.currentValue}))}ngOnDestroy(){this._showConfirmationEmitter$.complete()}handleShowConfirmation(){this._showConfirmationEmitter$.next(!0)}handleConfirmDeletion(e){e?this.deleteArticleEmitter$.emit(!0):this._showConfirmationEmitter$.next(!1)}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["art-article-detail-ui"]],inputs:{article:"article",user:"user",isLoading:"isLoading"},outputs:{editArticleEmitter$:"editArticle",deleteArticleEmitter$:"deleteArticle"},standalone:!0,features:[t.TTD,t.jDz],ngContentSelectors:R,decls:8,vars:4,consts:[[4,"ngIf","ngIfElse"],["confirmation",""],["sameAuthor",""],["diffAuthor",""],[1,"article-page"],[1,"banner"],[1,"container"],[1,"article-meta"],[3,"routerLink"],["alt","profilePic",3,"src"],[1,"info"],[1,"data"],[4,"ngIf"],[1,"container","page"],[1,"row","article-content"],[1,"col-xs-12"],[3,"tags"],[4,"ngTemplateOutlet"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["style","display: flex; flex-direction: column; align-items: center;",4,"ngrxLet"],[2,"display","flex","flex-direction","column","align-items","center"],["style","display: flex; align-items: center; justify-content: space-evenly; gap: 2rem",4,"ngIf"],[2,"display","flex","align-items","center","justify-content","space-evenly","gap","2rem"],["type","button",1,"btn","btn-danger",3,"disabled","click"],["type","button",1,"btn","btn-secondary",3,"click"],[4,"ngrxLet"],["type","button",1,"btn","btn-outline-secondary",3,"disabled","click"],[1,"ion-edit"],["type","button",1,"btn","btn-outline-danger",3,"disabled","click"],[1,"ion-trash-a"]],template:function(i,s){if(1&i&&(t.F$t(H),t.YNc(0,K,24,17,"ng-container",0),t.ALo(1,"ngrxPush"),t.YNc(2,d,3,5,"ng-template",null,1,t.W1O),t.YNc(4,Z,3,5,"ng-template",null,2,t.W1O),t.YNc(6,X,3,0,"ng-template",null,3,t.W1O)),2&i){const w=t.MAs(3);t.Q6J("ngIf",s.article&&!t.lcZ(1,2,s.showConfirmation$))("ngIfElse",w)}},dependencies:[r.ez,r.O5,r.tP,r.uU,m.Bz,m.rH,u.J,D.fM,D.eJ,O.aw,O.X$],encapsulation:2,changeDetection:0})}return n})();var Y=o(6992),z=o(3270),k=o(4172),q=o(8645),tt=o(9773),et=o(5921),M=o(6223),G=o(7921);function nt(n,c){if(1&n&&t._UZ(0,"img",18),2&n){const e=t.oxw(2).ngrxLet;t.Q6J("src",e.inputValues.comment.author.image,t.LSH)("width",50)("height",50)}}const it=function(n){return["/profiles",n]};function ot(n,c){if(1&n&&(t.TgZ(0,"span",19)(1,"span")(2,"a",20),t._uU(3),t.qZA()(),t.TgZ(4,"span")(5,"div",21),t._uU(6),t.ALo(7,"date"),t.qZA()()()),2&n){const e=t.oxw(2).ngrxLet;t.xp6(2),t.Q6J("routerLink",t.VKq(6,it,e.inputValues.comment.author.username)),t.xp6(1),t.hij(" ",e.inputValues.comment.author.username," "),t.xp6(3),t.Oqu(t.xi3(7,3,e.inputValues.comment.createdAt,"yyyy, MMM dd hh:mm a"))}}function rt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"span",22)(1,"button",23),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.cancelEmitter$.emit())}),t._UZ(2,"i",24),t._uU(3),t.qZA(),t.TgZ(4,"button",25),t._UZ(5,"i",26),t._uU(6),t.qZA()()}if(2&n){const e=t.oxw(2).ngrxLet,i=t.oxw().ngrxLet;t.xp6(1),t.Q6J("disabled",e.inputValues.isLoading||e.inputValues.isSubmitting),t.xp6(2),t.hij(" \xa0 ",i.buttons.cancel," "),t.xp6(1),t.Q6J("disabled","INVALID"===e.formStatus||e.inputValues.isLoading||e.inputValues.isSubmitting),t.xp6(2),t.hij(" \xa0 ",i.buttons.post," ")}}function st(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.handleShowConfirmation(!0))}),t._UZ(1,"i",28),t._uU(2),t.qZA()}if(2&n){const e=t.oxw(2).ngrxLet,i=t.oxw().ngrxLet;t.Q6J("disabled",e.inputValues.isLoading||e.inputValues.isSubmitting),t.xp6(2),t.hij(" \xa0 ",i.buttons.delete," ")}}function at(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3).ngrxLet,w=t.oxw(2);return t.KtG(w.emitDeleteComment(s.inputValues.comment.id))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(3).ngrxLet,i=t.oxw().ngrxLet;t.Q6J("disabled",e.inputValues.isLoading||e.inputValues.isSubmitting),t.xp6(1),t.hij(" ",i.buttons.confirm," ")}}function ct(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(5);return t.KtG(s.handleShowConfirmation(!1))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(3).ngrxLet,i=t.oxw().ngrxLet;t.Q6J("disabled",e.inputValues.isLoading||e.inputValues.isSubmitting),t.xp6(1),t.hij(" ",i.buttons.cancel," ")}}function lt(n,c){if(1&n&&(t.TgZ(0,"span",22),t.YNc(1,at,2,2,"button",17),t.YNc(2,ct,2,2,"button",29),t.qZA()),2&n){const e=t.oxw(2).ngrxLet;t.xp6(1),t.Q6J("ngIf",e.inputValues.comment&&e.inputValues.showAuthorOptions),t.xp6(1),t.Q6J("ngIf",e.inputValues.comment&&e.inputValues.showAuthorOptions)}}const mt=function(n){return{backgroundColor:n}};function ut(n,c){if(1&n&&(t.ynx(0),t.TgZ(1,"fieldset",9),t._UZ(2,"textarea",10),t.ALo(3,"ngrxPush"),t.qZA(),t.TgZ(4,"span",11)(5,"span",12),t.YNc(6,nt,1,3,"img",13),t.YNc(7,ot,8,8,"span",14),t.qZA(),t.TgZ(8,"span",15),t.YNc(9,rt,7,4,"span",16),t.YNc(10,st,3,2,"button",17),t.qZA(),t.YNc(11,lt,3,2,"span",16),t.qZA(),t.BQk()),2&n){const e=t.oxw().ngrxLet,i=t.oxw().ngrxLet,s=t.oxw();t.xp6(2),t.Q6J("placeholder",i.newComment.placeholder)("formControl",s.form.controls.commentDesc)("ngStyle",t.VKq(12,mt,"dark"===t.lcZ(3,10,s.theme$)?"#373a3c":void 0))("readonly",!!e.inputValues.comment||e.inputValues.isLoading)("rows",4),t.xp6(4),t.Q6J("ngIf",e.inputValues.comment),t.xp6(1),t.Q6J("ngIf",e.inputValues.comment),t.xp6(2),t.Q6J("ngIf",!e.inputValues.comment),t.xp6(1),t.Q6J("ngIf",e.inputValues.comment&&e.inputValues.showAuthorOptions&&!e.showConfirmation),t.xp6(1),t.Q6J("ngIf",e.showConfirmation)}}function _t(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"form",6,7),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSubmit())}),t.YNc(2,ut,12,14,"ng-container",8),t.qZA()}if(2&n){const e=c.ngrxLet,i=t.oxw(2);t.Q6J("formGroup",i.form),t.xp6(2),t.Q6J("ngIf",!!e)}}function dt(n,c){if(1&n&&(t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),t.YNc(4,_t,3,2,"form",5),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngrxLet",e.data$)}}let W=(()=>{class n{constructor(){this.isLoading=!1,this.isSubmitting=!1,this.showAuthorOptions=!1,this.theme=null,this._themeEmitter$=new J.X(null),this._inputValuesEmitter$=new J.X({isLoading:!1,isSubmitting:!1,showAuthorOptions:!1}),this._showConfirmationEmitter$=new J.X(!1),this._createCommentEmitter$=new t.vpe,this.cancelEmitter$=new t.vpe,this._deleteCommentEmitter$=new t.vpe,this.form=new M.cw({commentDesc:new M.NI("",{validators:[M.kI.required],nonNullable:!0})}),this.theme$=this._themeEmitter$.asObservable(),this.data$=(0,b.a)({formValues:this.form.valueChanges.pipe((0,G.O)(this.form.getRawValue())),formStatus:this.form.statusChanges.pipe((0,G.O)(this.form.status)),inputValues:this._inputValuesEmitter$.asObservable(),showConfirmation:this._showConfirmationEmitter$.asObservable()})}ngOnInit(){this.comment&&this.form.controls.commentDesc.patchValue(this.comment.body),this._inputValuesEmitter$.next({isLoading:this.isLoading,isSubmitting:this.isSubmitting,showAuthorOptions:this.showAuthorOptions,comment:this.comment}),this.theme&&this._themeEmitter$.next(this.theme)}ngOnChanges(e){(e.isLoading||e.isSubmitting)&&this._inputValuesEmitter$.next({...this._inputValuesEmitter$.getValue(),isLoading:e.isLoading?e.isLoading.currentValue:this._inputValuesEmitter$.getValue().isLoading,isSubmitting:e.isSubmitting?e.isSubmitting.currentValue:this._inputValuesEmitter$.getValue().isSubmitting}),e.theme&&this._themeEmitter$.next(e.theme.currentValue)}ngOnDestroy(){this._inputValuesEmitter$.complete(),this._showConfirmationEmitter$.complete(),this._themeEmitter$.complete()}handleShowConfirmation(e){this._showConfirmationEmitter$.next(e)}emitDeleteComment(e){this._deleteCommentEmitter$.emit(e)}onSubmit(){this._createCommentEmitter$.emit(this.form.controls.commentDesc.getRawValue())}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["art-comment-ui"]],inputs:{comment:"comment",isLoading:"isLoading",isSubmitting:"isSubmitting",showAuthorOptions:"showAuthorOptions",theme:"theme"},outputs:{_createCommentEmitter$:"createComment",cancelEmitter$:"cancel",_deleteCommentEmitter$:"deleteComment"},standalone:!0,features:[t.TTD,t.jDz],decls:2,vars:3,consts:[["class","container",4,"ngrxLet"],[1,"container"],[1,"row"],[1,"col"],[2,"border","1px solid lightgrey","border-radius","5px","padding","1rem"],[3,"formGroup","ngSubmit",4,"ngrxLet"],[3,"formGroup","ngSubmit"],["formTemplate","ngForm"],[4,"ngIf"],[1,"form-group"],["type","text",1,"form-control","form-control-lg",3,"placeholder","formControl","ngStyle","readonly","rows"],[2,"display","flex","flex-direction","row","align-items","center","justify-content","space-between"],[2,"display","flex","flex-direction","row"],["style","border-radius: 50%;","alt","profilePic",3,"src","width","height",4,"ngIf"],["style","display: flex; flex-direction: column;",4,"ngIf"],[2,"display","flex","justify-content","flex-end"],["class","btn-options",4,"ngIf"],["type","button","class","btn btn-md btn-danger pull-xs-right",3,"disabled","click",4,"ngIf"],["alt","profilePic",2,"border-radius","50%",3,"src","width","height"],[2,"display","flex","flex-direction","column"],[2,"padding-left","0.5rem",3,"routerLink"],[2,"padding-left","0.5rem"],[1,"btn-options"],["type","button",1,"btn","btn-md","btn-secondary","pull-xs-right",3,"disabled","click"],[1,"ion-close"],["type","submit",1,"btn","btn-md","btn-primary","pull-xs-right",3,"disabled"],[1,"ion-android-send"],["type","button",1,"btn","btn-md","btn-danger","pull-xs-right",3,"disabled","click"],[1,"ion-trash-a"],["type","button","class","btn btn-md btn-secondary pull-xs-right",3,"disabled","click",4,"ngIf"]],template:function(i,s){1&i&&(t.YNc(0,dt,5,1,"div",0),t.ALo(1,"translate")),2&i&&t.Q6J("ngrxLet",t.lcZ(1,1,"comment"))},dependencies:[r.ez,r.O5,r.PC,r.uU,M.UX,M._Y,M.Fj,M.JJ,M.JL,M.oH,M.sg,D.eJ,D.fM,m.Bz,m.rH,O.aw,O.X$],styles:[".btn-options[_ngcontent-%COMP%]{display:flex;gap:5px;justify-content:flex-end}"],changeDetection:0})}return n})();function gt(n,c){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"art-comment-ui",7),t.NdJ("deleteComment",function(s){t.CHM(e);const w=t.oxw(4);return t.KtG(w.onDeleteComment(s))}),t.qZA(),t.BQk()}if(2&n){const e=c.$implicit,i=t.oxw(3).ngIf;t.xp6(1),t.Q6J("comment",e)("isLoading",i.isLoading)("theme",i.theme)("showAuthorOptions",e.author.username===(null==i.currentUser?null:i.currentUser.username))}}function ft(n,c){if(1&n&&(t.TgZ(0,"div",3),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).ngrxLet;t.xp6(1),t.hij(" ",e.noComments," ")}}function pt(n,c){if(1&n&&(t.ynx(0),t.YNc(1,gt,2,4,"ng-container",5),t.YNc(2,ft,2,1,"div",6),t.BQk()),2&n){const e=c.ngIf;t.xp6(1),t.Q6J("ngForOf",e),t.xp6(1),t.Q6J("ngIf",!e||0===e.length)}}function ht(n,c){if(1&n){const e=t.EpF();t.ynx(0),t._UZ(1,"hr",12),t.TgZ(2,"h4",13),t._uU(3),t.qZA(),t.TgZ(4,"art-comment-ui",14),t.NdJ("cancel",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.onCancelComment())})("createComment",function(s){t.CHM(e);const w=t.oxw(4);return t.KtG(w.onCreateComment(s))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2).ngrxLet,i=t.oxw().ngIf;t.xp6(3),t.hij(" ",e.buttons.new," "),t.xp6(1),t.Q6J("isLoading",i.isLoading)("isSubmitting",i.isSubmitting)}}function xt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"button",10),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.handleAddCommentBtn())}),t._UZ(3,"i",11),t._uU(4),t.qZA()(),t.YNc(5,ht,5,3,"ng-container",0),t.qZA()}if(2&n){const e=c.ngrxLet,i=t.oxw().ngrxLet,s=t.oxw().ngIf;t.xp6(2),t.Q6J("hidden",e||!s.currentUser),t.xp6(2),t.hij(" \xa0 ",i.buttons.add," "),t.xp6(1),t.Q6J("ngIf",s.currentUser&&e)}}function At(n,c){if(1&n&&(t.TgZ(0,"div",2)(1,"h2",3),t._uU(2),t.qZA(),t._UZ(3,"br"),t.YNc(4,pt,3,2,"ng-container",0),t.YNc(5,xt,6,3,"div",4),t.qZA()),2&n){const e=c.ngrxLet,i=t.oxw().ngIf,s=t.oxw();t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Q6J("ngIf",i.comments),t.xp6(1),t.Q6J("ngrxLet",s.showNewCommentDialog$)}}function vt(n,c){1&n&&(t.ynx(0),t.YNc(1,At,6,3,"div",1),t.ALo(2,"ngrxPush"),t.ALo(3,"translate"),t.BQk()),2&n&&(t.xp6(1),t.Q6J("ngrxLet",t.lcZ(2,1,t.lcZ(3,3,"comment"))))}let Ct=(()=>{class n{constructor(){this._store=(0,t.f3M)(v.yh),this._destroyEmitter$=new q.x,this._showNewCommentDialogEmitter$=new J.X(!0),this._prefsService=(0,t.f3M)(et.y),this.showNewCommentDialog$=this._showNewCommentDialogEmitter$.asObservable(),this.data$=(0,b.a)({comments:this._store.select(p.q7).pipe((0,h.h)(Boolean),(0,A.U)(e=>e.slug),(0,a.b)(e=>this._store.dispatch(_.o.getArticleComments({slug:e}))),(0,$.w)(()=>this._store.select(p.d5)),(0,h.h)(e=>!!e&&Array.isArray(e))),isLoading:this._store.select(p.Lo),theme:this._prefsService.appThemes$,isSubmitting:this._store.select(p.hb),currentUser:this._store.select(y.HF).pipe((0,h.h)(e=>void 0!==e))}),this._store.select(p.d5).pipe((0,tt.R)(this._destroyEmitter$),(0,h.h)(e=>!!e)).subscribe(()=>this._showNewCommentDialogEmitter$.next(!1))}ngOnDestroy(){this._destroyEmitter$.next(!0),this._destroyEmitter$.complete(),this._showNewCommentDialogEmitter$.complete()}onCreateComment(e){this._store.select(p.q7).pipe((0,f.q)(1),(0,h.h)(i=>!!i),(0,A.U)(i=>i.slug)).subscribe(i=>{this._store.dispatch(_.o.createArticleComment({articleSlug:i,data:e}))})}onDeleteComment(e){this._store.select(p.q7).pipe((0,f.q)(1),(0,h.h)(i=>!!i),(0,A.U)(i=>i.slug)).subscribe(i=>{this._store.dispatch(_.o.deleteArticleComment({articleSlug:i,commentId:e}))})}handleAddCommentBtn(){this._showNewCommentDialogEmitter$.next(!0)}onCancelComment(){this._showNewCommentDialogEmitter$.next(!1)}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["art-comments-list"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","container-fluid",4,"ngrxLet"],[1,"container-fluid"],[2,"text-align","center"],["class","row mt-5",4,"ngrxLet"],[4,"ngFor","ngForOf"],["style","text-align: center;",4,"ngIf"],[2,"padding","0.5rem",3,"comment","isLoading","theme","showAuthorOptions","deleteComment"],[1,"row","mt-5"],[1,"col","text-end"],["type","button",1,"btn","btn-lg","btn-success",3,"hidden","click"],[1,"ion-plus"],[1,"mt-2"],[1,"mt-3","mb-3",2,"text-align","center"],[3,"isLoading","isSubmitting","cancel","createComment"]],template:function(i,s){1&i&&(t.YNc(0,vt,4,5,"ng-container",0),t.ALo(1,"ngrxPush")),2&i&&t.Q6J("ngIf",t.lcZ(1,1,s.data$))},dependencies:[r.sg,r.O5,W,D.eJ,D.fM,O.X$],encapsulation:2,changeDetection:0})}return n})();function Et(n,c){if(1&n&&t._UZ(0,"mc-backend-error-messages",2),2&n){const e=t.oxw().ngIf;t.Q6J("errors",e.error)}}function Lt(n,c){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"art-article-detail-ui",3),t.NdJ("deleteArticle",function(s){t.CHM(e);const w=t.oxw(2);return t.KtG(w.onDeleteArticle(s))})("editArticle",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onEditArticle())}),t._UZ(2,"app-follow-profile",4)(3,"app-fav-article",5),t.qZA(),t.TgZ(4,"div",6),t._UZ(5,"hr",7),t.qZA(),t._UZ(6,"art-comments-list"),t.BQk()}if(2&n){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("article",e.article)("user",e.currentUser)("isLoading",e.isLoading),t.xp6(2),t.Q6J("articleSlug",e.article.slug)("isFavorited",e.article.favorited)("favCount",e.article.favoritesCount)}}function Tt(n,c){1&n&&t._UZ(0,"mc-loading")}function bt(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Et,1,1,"mc-backend-error-messages",1),t.YNc(2,Lt,7,6,"ng-container",0),t.YNc(3,Tt,1,0,"mc-loading",0),t.qZA()),2&n){const e=c.ngIf;t.xp6(1),t.Q6J("ngIf",e.error),t.xp6(1),t.Q6J("ngIf",e.article),t.xp6(1),t.Q6J("ngIf",e.isLoading)}}const yt=[{path:"",component:(()=>{class n{constructor(){this._store=(0,t.f3M)(v.yh),this._route=(0,t.f3M)(m.gz),this._router=(0,t.f3M)(m.F0),this._item$=this._route.paramMap.pipe((0,A.U)(e=>{const i=e.get("slug");if(!i)throw new TypeError("slug not found");return i}),(0,C.K)(e=>(this._router.navigate(["/home"]),(0,T.of)(e))),(0,h.h)(e=>"string"==typeof e),(0,a.b)(e=>this._store.dispatch(_.o.getArticle({slug:e}))),(0,$.w)(()=>this._store.select(p.q7)),(0,U.d)({bufferSize:1,refCount:!0})),this.data$=(0,b.a)({article:this._item$,error:this._store.select(p.uD),isLoading:this._store.select(p.Lo),currentUser:this._store.select(y.HF).pipe((0,h.h)(e=>void 0!==e))})}onEditArticle(){const e=this._route.snapshot.paramMap.get("slug");e&&this._router.navigate(["../edit"],{queryParams:{slug:e},relativeTo:this._route})}onDeleteArticle(e){!0===e&&this._item$.pipe((0,f.q)(1),(0,h.h)(i=>!!i),(0,A.U)(i=>i.slug)).subscribe(i=>{this._store.dispatch(_.o.deleteArticle({slug:i}))})}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["mc-article"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"errors",4,"ngIf"],[3,"errors"],[3,"article","user","isLoading","deleteArticle","editArticle"],["followProfile",""],["favArticle","",3,"articleSlug","isFavorited","favCount"],[2,"display","flex","justify-content","center"],[2,"width","90%"]],template:function(i,s){1&i&&(t.YNc(0,bt,4,3,"div",0),t.ALo(1,"ngrxPush")),2&i&&t.Q6J("ngIf",t.lcZ(1,1,s.data$))},dependencies:[r.O5,E.a,j,Y.N,z.g,k.G,Ct,D.fM],encapsulation:2,changeDetection:0})}return n})(),title:"Article"}];let Zt=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(yt),m.Bz]})}return n})();var Mt=o(8994),Dt=o(9340);let wt=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[r.ez,W,O.aw]})}return n})(),$t=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[r.ez,Zt,E.a,j,Y.N,Mt.o,Dt.D,wt]})}return n})()},2698:(F,L,o)=>{o.r(L),o.d(L,{ArticleShellModule:()=>K});var r={};o.r(r),o.d(r,{createArticleCommentEffect:()=>O,createArticleEffect:()=>I,deleteArticleCommentEffect:()=>P,deleteArticleEffect:()=>B,editArticleEffect:()=>V,getArticleCommentsEffect:()=>D,getArticleEffect:()=>J,redirectAfterDeleteSuccess:()=>S,redirectAfterSuccessEffect:()=>N,reloadAfterCommentSuccessEffect:()=>Q});var m=o(2394),t=o(5879);const v=[{path:"create",pathMatch:"full",loadChildren:()=>Promise.all([o.e(592),o.e(809)]).then(o.bind(o,5809)).then(l=>l.ArticleCreateModule)},{path:"edit",pathMatch:"full",loadChildren:()=>Promise.all([o.e(592),o.e(835)]).then(o.bind(o,6835)).then(l=>l.ArticleEditModule)},{path:":slug",loadChildren:()=>Promise.resolve().then(o.bind(o,9972)).then(l=>l.ArticleDetailModule)},{path:"**",redirectTo:"create"}];let A=(()=>{class l{static#t=this.\u0275fac=function(g){return new(g||l)};static#e=this.\u0275mod=t.oAB({type:l});static#n=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(v),m.Bz]})}return l})();var C=o(6814),T=o(8904),h=o(9972),a=o(5154),$=o(4221),U=o(4440),b=o(4664),f=o(7398),p=o(6306),_=o(2096),y=o(9397),E=o(3163),u=o(7808);const J=(0,a.GW)((l=(0,t.f3M)(a.eX),x=(0,t.f3M)(E.J))=>l.pipe((0,a.l4)(u.o.getArticle),(0,b.w)(({slug:d})=>x.getArticlesBySlug(d).pipe((0,f.U)(g=>u.o.getArticleSuccess({article:g})),(0,p.K)(g=>(0,_.of)(u.o.getArticleFailure({error:g})))))),{functional:!0}),D=(0,a.GW)((l=(0,t.f3M)(a.eX),x=(0,t.f3M)(E.J))=>l.pipe((0,a.l4)(u.o.getArticleComments),(0,b.w)(({slug:d})=>x.getCommentsBySlug(d).pipe((0,f.U)(g=>u.o.getArticleCommentsSuccess({comments:g})),(0,p.K)(g=>(0,_.of)(u.o.getArticleCommentsFailure({errors:g.error.errors??[]})))))),{functional:!0}),O=(0,a.GW)((l=(0,t.f3M)(a.eX),x=(0,t.f3M)(E.J))=>l.pipe((0,a.l4)(u.o.createArticleComment),(0,b.w)(({articleSlug:d,data:g})=>x.createArticleComment(d,g).pipe((0,f.U)(Z=>u.o.createArticleCommentSuccess({articleSlug:d,comment:Z})),(0,p.K)(Z=>(0,_.of)(u.o.createArticleCommentFailure({errors:Z.error.errors??[]})))))),{functional:!0}),P=(0,a.GW)((l=(0,t.f3M)(a.eX),x=(0,t.f3M)(E.J))=>l.pipe((0,a.l4)(u.o.deleteArticleComment),(0,b.w)(({articleSlug:d,commentId:g})=>x.deleteArticleComment(d,g).pipe((0,f.U)(()=>u.o.deleteArticleCommentSuccess({articleSlug:d})),(0,p.K)(Z=>(0,_.of)(u.o.deleteArticleCommentFailure({errors:Z.error.errors??[]})))))),{functional:!0}),Q=(0,a.GW)((l=(0,t.f3M)(a.eX),x=(0,t.f3M)($.yh))=>l.pipe((0,a.l4)(u.o.createArticleCommentSuccess,u.o.deleteArticleCommentSuccess),(0,y.b)(d=>x.dispatch(u.o.getArticleComments({slug:d.articleSlug})))),{functional:!0,dispatch:!1}),I=(0,a.GW)((l=(0,t.f3M)(a.eX),x=(0,t.f3M)(E.J))=>l.pipe((0,a.l4)(u.o.createArticle),(0,b.w)(({data:d})=>x.createArticle(d).pipe((0,f.U)(g=>u.o.createArticleSuccess({article:g})),(0,p.K)(g=>(0,_.of)(u.o.createArticleFailure({errors:g.error.errors??[]})))))),{functional:!0}),N=(0,a.GW)((l=(0,t.f3M)(a.eX),x=(0,t.f3M)(m.F0))=>l.pipe((0,a.l4)(u.o.createArticleSuccess,u.o.editArticleSuccess),(0,y.b)(d=>{x.navigate([`./articles/${d.article.slug}`])})),{functional:!0,dispatch:!1}),V=(0,a.GW)((l=(0,t.f3M)(a.eX),x=(0,t.f3M)(E.J))=>l.pipe((0,a.l4)(u.o.editArticle),(0,b.w)(({data:d,slug:g})=>x.editArticle({title:d.title,description:d.description,body:d.body},g).pipe((0,f.U)(Z=>u.o.editArticleSuccess({article:Z})),(0,p.K)(Z=>(0,_.of)(u.o.editArticleFailure({errors:Z.error.errors??[]})))))),{functional:!0}),B=(0,a.GW)((l=(0,t.f3M)(a.eX),x=(0,t.f3M)(E.J))=>l.pipe((0,a.l4)(u.o.deleteArticle),(0,b.w)(({slug:d})=>x.deleteArticle(d).pipe((0,f.U)(()=>u.o.deleteArticleSuccess()),(0,p.K)(g=>(0,_.of)(u.o.deleteArticleFailure({errors:g.error.errors??[]})))))),{functional:!0}),S=(0,a.GW)((l=(0,t.f3M)(a.eX),x=(0,t.f3M)(m.F0))=>l.pipe((0,a.l4)(u.o.deleteArticleSuccess),(0,y.b)(()=>x.navigate(["/home"]))),{functional:!0,dispatch:!1});let K=(()=>{class l{static#t=this.\u0275fac=function(g){return new(g||l)};static#e=this.\u0275mod=t.oAB({type:l});static#n=this.\u0275inj=t.cJS({providers:[(0,$.oY)(U.AQ,U.Jl)],imports:[A,C.ez,T.a,h.ArticleDetailModule,a.sQ.forFeature(r)]})}return l})()},3270:(F,L,o)=>{o.d(L,{g:()=>b});var r=o(5879),m=o(4221),t=o(2056),v=o(5619),A=o(7398),C=o(1582),T=o(6814),h=o(8091);const a=function(f,p){return{btn:!0,"btn-sm":!0,"btn-primary":f,"btn-outline-primary":p}};function $(f,p){if(1&f){const _=r.EpF();r.ynx(0),r.TgZ(1,"button",1),r.NdJ("click",function(){r.CHM(_);const E=r.oxw();return r.KtG(E.onFavorite())}),r._UZ(2,"i",2),r.TgZ(3,"span"),r._uU(4),r.qZA()(),r.BQk()}if(2&f){const _=p.ngrxLet;r.xp6(1),r.Q6J("disabled",!_.isAuth)("ngClass",r.WLB(3,a,_.isFavorited,!_.isFavorited)),r.xp6(3),r.hij("\xa0",_.count,"")}}const U=function(f,p,_){return{count:f,isFavorited:p,isAuth:_}};let b=(()=>{class f{constructor(){this._favCountEmitter$=new v.X(0),this._isFavoritedEmitter$=new v.X(!1),this._store=(0,r.f3M)(m.yh),this.isAuth$=this._store.select(C.HF).pipe((0,A.U)(_=>!!_)),this.isFavorited=!1,this.favCount=0,this.slug="",this.favCount$=this._favCountEmitter$.asObservable(),this.isFavorited$=this._isFavoritedEmitter$.asObservable()}ngOnInit(){if(!this.slug)throw new Error("Must provide slug");this._favCountEmitter$.next(this.favCount),this._isFavoritedEmitter$.next(this.isFavorited)}ngOnDestroy(){this._favCountEmitter$.complete(),this._isFavoritedEmitter$.complete()}onFavorite(){this.isFavorited?(this._favCountEmitter$.next(this.favCount-1),this.favCount-=1):(this._favCountEmitter$.next(this.favCount+1),this.favCount+=1),this._isFavoritedEmitter$.next(!this.isFavorited),this.isFavorited=!this.isFavorited,this._store.dispatch(t.C.favoriteArticle({slug:this.slug,isFavorited:this.isFavorited}))}static#t=this.\u0275fac=function(y){return new(y||f)};static#e=this.\u0275cmp=r.Xpm({type:f,selectors:[["app-fav-article"]],inputs:{isFavorited:"isFavorited",favCount:"favCount",slug:["articleSlug","slug"]},decls:1,vars:5,consts:[[4,"ngrxLet"],["type","button",3,"disabled","ngClass","click"],[1,"ion-heart"]],template:function(y,E){1&y&&r.YNc(0,$,5,6,"ng-container",0),2&y&&r.Q6J("ngrxLet",r.kEZ(1,U,E.favCount$,E.isFavorited$,E.isAuth$))},dependencies:[T.mk,h.eJ],encapsulation:2,changeDetection:0})}return f})()},8994:(F,L,o)=>{o.d(L,{o:()=>t});var r=o(6814),m=o(5879);let t=(()=>{class v{static#t=this.\u0275fac=function(T){return new(T||v)};static#e=this.\u0275mod=m.oAB({type:v});static#n=this.\u0275inj=m.cJS({imports:[r.ez]})}return v})()},6992:(F,L,o)=>{o.d(L,{N:()=>A});var r=o(8091),m=o(9515),t=o(5879);function v(C,T){if(1&C&&(t.TgZ(0,"div",1)(1,"strong"),t._uU(2),t.qZA(),t._UZ(3,"div",2),t.qZA()),2&C){const h=T.ngrxLet;t.xp6(2),t.Oqu(h.loadingText)}}let A=(()=>{class C{static#t=this.\u0275fac=function(a){return new(a||C)};static#e=this.\u0275cmp=t.Xpm({type:C,selectors:[["mc-loading"]],standalone:!0,features:[t.jDz],decls:2,vars:3,consts:[["class","d-flex align-items-center",4,"ngrxLet"],[1,"d-flex","align-items-center"],["role","status","aria-hidden","true",1,"spinner-border","ms-auto"]],template:function(a,$){1&a&&(t.YNc(0,v,4,1,"div",0),t.ALo(1,"translate")),2&a&&t.Q6J("ngrxLet",t.lcZ(1,1,"app"))},dependencies:[r.eJ,m.aw,m.X$],encapsulation:2,changeDetection:0})}return C})()},7232:(F,L,o)=>{o.d(L,{J:()=>v});var r=o(6814),m=o(5879);function t(A,C){if(1&A&&(m.TgZ(0,"li",2),m._uU(1),m.qZA()),2&A){const T=C.$implicit;m.xp6(1),m.hij(" ",T," ")}}let v=(()=>{class A{constructor(){this.tags=[]}static#t=this.\u0275fac=function(h){return new(h||A)};static#e=this.\u0275cmp=m.Xpm({type:A,selectors:[["mc-tag-list"]],inputs:{tags:"tags"},standalone:!0,features:[m.jDz],decls:2,vars:1,consts:[[1,"tag-list"],["class","tag-default tag-pill tag-outline",4,"ngFor","ngForOf"],[1,"tag-default","tag-pill","tag-outline"]],template:function(h,a){1&h&&(m.TgZ(0,"ul",0),m.YNc(1,t,2,1,"li",1),m.qZA()),2&h&&(m.xp6(1),m.Q6J("ngForOf",a.tags))},dependencies:[r.ez,r.sg],encapsulation:2})}return A})()}}]);